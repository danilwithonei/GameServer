import fs from "fs";
import { Client } from "./client";

export class Game {
    // gameMap = fs.readFileSync("../maps/map1.txt").toString();
    gameMap = `######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
##############################                                                     +----+                                               ##############################
##############################                                                     |    |                                               ##############################
##############################                                                     +----+                                               ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                +----------------+                                                                        ##############################
##############################                |                |                                                                        ##############################
##############################            +---+                |                                                                        ##############################
##############################                                 +----------------+                                                       ##############################
##############################            +---+                                 |                                                       ##############################
##############################                |                                 |                                                       ##############################
##############################                |                       +---------+                                                       ##############################
##############################                |                       |                                                                 ##############################
##############################                +-----------------------+       +------+                                                  ##############################
##############################                                                |      |                                                  ##############################
##############################                                                |      |                                                  ##############################
##############################                                                |      |                                                  ##############################
##############################                                                |      |                                                  ##############################
##############################                                                +------+                                                  ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                     +----------+                                                         ##############################
##############################                                     |          |                                                         ##############################
##############################                                     |          |                                                         ##############################
##############################                                     |          |                                                         ##############################
##############################                                     |          |                                                         ##############################
##############################                            +---+ +--+          +--+ +--+                                                 ##############################
##############################                            |                           |                                                 ##############################
##############################                            |                   +-------+                                                 ##############################
##############################                            |                   |                                                         ##############################
##############################                            |                   |                                                         ##############################
##############################                            |                   |                                                         ##############################
##############################                            |                   |                                                         ##############################
##############################                            +-------------------+                                                         ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
##############################                                                                                                          ##############################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################
######################################################################################################################################################################`;
    mapMatrix = this.gameMap.split("\n");
    goTo(client: Client, duration: string) {
        switch (duration) {
            case "left": {
                if (this.mapMatrix[client.position.y][client.position.x - 1] === " ") {
                    client.position.x -= 1;
                }
                break;
            }
            case "right": {
                if (this.mapMatrix[client.position.y][client.position.x + 1] === " ") {
                    client.position.x += 1;
                }
                break;
            }
            case "up": {
                if (this.mapMatrix[client.position.y - 1][client.position.x] === " ") {
                    client.position.y -= 1;
                }
                break;
            }
            case "down": {
                if (this.mapMatrix[client.position.y + 1][client.position.x] === " ") {
                    client.position.y += 1;
                }
                break;
            }
        }
        // console.log(
        //     `left: ${this.mapMatrix[client.y][client.x - 1]} up: ${
        //         this.mapMatrix[client.y - 1][client.x]
        //     } right: ${this.mapMatrix[client.y][client.x + 1]} down: ${
        //         this.mapMatrix[client.y + 1][client.x]
        //     }`,
        // );
        // console.log(this.mapMatrix);
    }
}
